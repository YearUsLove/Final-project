# Файлы для итогового задания

В директории `tests` находятся тесты для проверки API, которое должно быть реализовано в веб-сервере.

Директория `web` содержит файлы фронтенда.

Описаник проекта:

Этот проект реализует веб-сервер на Go, работающий как планировщик задач(аналог TODO - листа) с поддержкой повторяющихся событий.
Сервер хранит задачи в базе данных SQLite.

Каждая задача содержит:
-дату дедлайна
-заголовок
-комментарий
-правила повторения(ежегодно, раз в N дней, еженедельно, ежемесячно).

Функциональность API:
-добавить задачу;
-получить список задач;
-удалить задачу;
-получить параметры задачи;
-изменить параметры задачи;
-отметить задачу как выполненную.

Повторяющиеся задачи при выполнении переносятся на следующую дату(по правилу). Одноразовые задачи удаляются при выполнении.

Выполненные задачи со звездочкой:
В проекте были выполнены все задания со звездочкой:
1. Шаг 1 - выбор порта через переменную окружения TODO_PORT.
2. Шаг 2 - выбор файла базы данных через переменную окружения TODO_DBFILE.
3. Шаг 3 - поддержка всех правил повторений(d, y, w, m) в функции NextDate.
4. Шаг 5 - поиск задач по подстроке(title и comment) и по конкретной дате через параметр search.

Запуск проекта локално:

Способ 1 "Запуск проекта через `.env`":
В терминале выполните команду: source .env && go run main.go

Способ 2 "Запуск с переменными прямо в команде"
В терминале выполните команду: TODO_PORT=7540 TODO_DBFILE=scheduler.db go run main.go

После запуска откройте в браузере:
http://localhost:7540

Запуск тестов:
Тесты используют настройки в tests/settings.go:

var Port = 7540
var DBFile = "../scheduler.db"
var FullNextDate = true
var Search = true
var Token = ``

Для корректной работы тестов:
Запустите сервер, через .env, командой в терминале : source .env && go run main.go
или
запустите сервер используя команду с переменными прямо в ней: TODO_PORT=7540 TODO_DBFILE=scheduler.db go run main.go
А в другом окне терминала выполните команду: go test ./tests
Также можно запускать отдельные тесты:
go test -run ^TestApp$ ./tests          # Запуск минимального веб-сервера
go test -run ^TestDB$ ./tests           # Создание и проверка базы данных SQLite
go test -run ^TestNextDate$ ./tests     # Правила повторения
go test -run ^TestAddTask$ ./tests      # Добавление задачи
go test -run ^TestTasks$ ./tests        # Список задач
go test -run ^TestTask$ ./tests         # Получение задачи
go test -run ^TestEditTask$ ./tests     # Редактирование задачи
go test -run ^TestDone$ ./tests         # Отметка выполнения задачи
go test -run ^TestDelTask$ ./tests      # Удаление задачи





